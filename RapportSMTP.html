<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_h2ylx74aeggx-1{list-style-type:none}ul.lst-kix_h2ylx74aeggx-2{list-style-type:none}ul.lst-kix_h2ylx74aeggx-3{list-style-type:none}ul.lst-kix_h2ylx74aeggx-4{list-style-type:none}ul.lst-kix_h2ylx74aeggx-0{list-style-type:none}ol.lst-kix_2vcjkputpssp-7.start{counter-reset:lst-ctn-kix_2vcjkputpssp-7 0}.lst-kix_lj40l5vaxjd0-8>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-8}ol.lst-kix_lj40l5vaxjd0-7.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-7 0}.lst-kix_kzjbfvn5qe2e-7>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-7,lower-latin) ". "}.lst-kix_kzjbfvn5qe2e-8>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-8,lower-roman) ". "}.lst-kix_kzjbfvn5qe2e-5>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-5,lower-roman) ". "}ol.lst-kix_kzjbfvn5qe2e-4.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-4 0}.lst-kix_2vcjkputpssp-8>li{counter-increment:lst-ctn-kix_2vcjkputpssp-8}.lst-kix_kzjbfvn5qe2e-2>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-2,lower-roman) ". "}.lst-kix_kzjbfvn5qe2e-6>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-6,decimal) ". "}.lst-kix_kzjbfvn5qe2e-3>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-3}ol.lst-kix_lj40l5vaxjd0-2.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-2 0}.lst-kix_kzjbfvn5qe2e-3>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-3,decimal) ". "}.lst-kix_kzjbfvn5qe2e-4>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-4,lower-latin) ". "}.lst-kix_kzjbfvn5qe2e-5>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-5}ol.lst-kix_lj40l5vaxjd0-5.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-5 0}ol.lst-kix_kzjbfvn5qe2e-7.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-7 0}.lst-kix_lj40l5vaxjd0-6>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-6}.lst-kix_kzjbfvn5qe2e-1>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-1,lower-latin) ". "}.lst-kix_2vcjkputpssp-1>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-1,lower-latin) ". "}.lst-kix_2vcjkputpssp-2>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-2,lower-roman) ". "}.lst-kix_kzjbfvn5qe2e-0>li:before{content:"" counter(lst-ctn-kix_kzjbfvn5qe2e-0,decimal) ". "}.lst-kix_2vcjkputpssp-3>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-3,decimal) ". "}.lst-kix_2vcjkputpssp-1>li{counter-increment:lst-ctn-kix_2vcjkputpssp-1}.lst-kix_2vcjkputpssp-4>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-4,lower-latin) ". "}.lst-kix_kzjbfvn5qe2e-7>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-7}.lst-kix_2vcjkputpssp-7>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-7,lower-latin) ". "}ol.lst-kix_kzjbfvn5qe2e-8.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-8 0}.lst-kix_2vcjkputpssp-5>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-5,lower-roman) ". "}ol.lst-kix_lj40l5vaxjd0-1.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-1 0}.lst-kix_2vcjkputpssp-6>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-6,decimal) ". "}.lst-kix_2vcjkputpssp-7>li{counter-increment:lst-ctn-kix_2vcjkputpssp-7}ol.lst-kix_2vcjkputpssp-1.start{counter-reset:lst-ctn-kix_2vcjkputpssp-1 0}.lst-kix_2vcjkputpssp-8>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-8,lower-roman) ". "}ol.lst-kix_kzjbfvn5qe2e-1.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-1 0}.lst-kix_lj40l5vaxjd0-5>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-5}ol.lst-kix_2vcjkputpssp-2{list-style-type:none}ol.lst-kix_2vcjkputpssp-3{list-style-type:none}ol.lst-kix_2vcjkputpssp-0{list-style-type:none}ol.lst-kix_2vcjkputpssp-1{list-style-type:none}ol.lst-kix_2vcjkputpssp-2.start{counter-reset:lst-ctn-kix_2vcjkputpssp-2 0}ol.lst-kix_2vcjkputpssp-6{list-style-type:none}ol.lst-kix_2vcjkputpssp-7{list-style-type:none}ol.lst-kix_2vcjkputpssp-4{list-style-type:none}ol.lst-kix_2vcjkputpssp-5{list-style-type:none}ol.lst-kix_2vcjkputpssp-8{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-0.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-0 0}.lst-kix_kzjbfvn5qe2e-4>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-4}ol.lst-kix_2vcjkputpssp-8.start{counter-reset:lst-ctn-kix_2vcjkputpssp-8 0}.lst-kix_kzjbfvn5qe2e-1>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-1}ol.lst-kix_kzjbfvn5qe2e-2.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-2 0}.lst-kix_h2ylx74aeggx-1>li:before{content:"\0025cf  "}ol.lst-kix_2vcjkputpssp-3.start{counter-reset:lst-ctn-kix_2vcjkputpssp-3 0}ol.lst-kix_kzjbfvn5qe2e-3.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-3 0}.lst-kix_h2ylx74aeggx-0>li:before{content:"\0025cf  "}.lst-kix_h2ylx74aeggx-4>li:before{content:"\0025cf  "}.lst-kix_2vcjkputpssp-4>li{counter-increment:lst-ctn-kix_2vcjkputpssp-4}ol.lst-kix_lj40l5vaxjd0-6.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-6 0}.lst-kix_lj40l5vaxjd0-2>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-2}.lst-kix_h2ylx74aeggx-5>li:before{content:"\0025cf  "}ol.lst-kix_kzjbfvn5qe2e-0{list-style-type:none}ol.lst-kix_kzjbfvn5qe2e-0.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-0 0}ol.lst-kix_kzjbfvn5qe2e-1{list-style-type:none}.lst-kix_h2ylx74aeggx-6>li:before{content:"\0025cf  "}ol.lst-kix_kzjbfvn5qe2e-6.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-6 0}.lst-kix_h2ylx74aeggx-3>li:before{content:"\0025cf  "}.lst-kix_2vcjkputpssp-3>li{counter-increment:lst-ctn-kix_2vcjkputpssp-3}.lst-kix_h2ylx74aeggx-2>li:before{content:"\0025cf  "}.lst-kix_2vcjkputpssp-5>li{counter-increment:lst-ctn-kix_2vcjkputpssp-5}.lst-kix_2vcjkputpssp-2>li{counter-increment:lst-ctn-kix_2vcjkputpssp-2}ol.lst-kix_2vcjkputpssp-6.start{counter-reset:lst-ctn-kix_2vcjkputpssp-6 0}.lst-kix_kzjbfvn5qe2e-0>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-0}ol.lst-kix_kzjbfvn5qe2e-4{list-style-type:none}ol.lst-kix_kzjbfvn5qe2e-5{list-style-type:none}ol.lst-kix_kzjbfvn5qe2e-2{list-style-type:none}ol.lst-kix_kzjbfvn5qe2e-3{list-style-type:none}.lst-kix_kzjbfvn5qe2e-8>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-8}.lst-kix_h2ylx74aeggx-7>li:before{content:"\0025cf  "}ol.lst-kix_2vcjkputpssp-0.start{counter-reset:lst-ctn-kix_2vcjkputpssp-0 1}ol.lst-kix_kzjbfvn5qe2e-8{list-style-type:none}ol.lst-kix_kzjbfvn5qe2e-6{list-style-type:none}ol.lst-kix_kzjbfvn5qe2e-7{list-style-type:none}.lst-kix_h2ylx74aeggx-8>li:before{content:"\0025cf  "}.lst-kix_lj40l5vaxjd0-0>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-0}.lst-kix_lj40l5vaxjd0-3>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-3}ol.lst-kix_lj40l5vaxjd0-8.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-8 0}.lst-kix_d5qhc01li29j-5>li:before{content:"\0025a0  "}.lst-kix_lj40l5vaxjd0-0>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-0,decimal) ". "}.lst-kix_d5qhc01li29j-4>li:before{content:"\0025cb  "}.lst-kix_d5qhc01li29j-6>li:before{content:"\0025cf  "}.lst-kix_d5qhc01li29j-3>li:before{content:"\0025cf  "}.lst-kix_d5qhc01li29j-7>li:before{content:"\0025cb  "}ul.lst-kix_d5qhc01li29j-8{list-style-type:none}ul.lst-kix_d5qhc01li29j-7{list-style-type:none}.lst-kix_2vcjkputpssp-0>li:before{content:"" counter(lst-ctn-kix_2vcjkputpssp-0,decimal) ". "}ol.lst-kix_2vcjkputpssp-5.start{counter-reset:lst-ctn-kix_2vcjkputpssp-5 0}.lst-kix_d5qhc01li29j-1>li:before{content:"\0025cb  "}ol.lst-kix_kzjbfvn5qe2e-5.start{counter-reset:lst-ctn-kix_kzjbfvn5qe2e-5 0}.lst-kix_lj40l5vaxjd0-4>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-4,lower-latin) ". "}.lst-kix_d5qhc01li29j-0>li:before{content:"\0025cf  "}.lst-kix_d5qhc01li29j-2>li:before{content:"\0025a0  "}.lst-kix_d5qhc01li29j-8>li:before{content:"\0025a0  "}.lst-kix_lj40l5vaxjd0-5>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-5,lower-roman) ". "}.lst-kix_2vcjkputpssp-0>li{counter-increment:lst-ctn-kix_2vcjkputpssp-0}.lst-kix_kzjbfvn5qe2e-2>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-2}.lst-kix_lj40l5vaxjd0-7>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-7,lower-latin) ". "}.lst-kix_lj40l5vaxjd0-6>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-6,decimal) ". "}ol.lst-kix_lj40l5vaxjd0-7{list-style-type:none}.lst-kix_lj40l5vaxjd0-8>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-8,lower-roman) ". "}.lst-kix_2vcjkputpssp-6>li{counter-increment:lst-ctn-kix_2vcjkputpssp-6}ol.lst-kix_lj40l5vaxjd0-8{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-5{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-4.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-4 0}ol.lst-kix_lj40l5vaxjd0-6{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-3{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-4{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-1{list-style-type:none}ul.lst-kix_d5qhc01li29j-4{list-style-type:none}ol.lst-kix_lj40l5vaxjd0-2{list-style-type:none}ul.lst-kix_d5qhc01li29j-3{list-style-type:none}ul.lst-kix_d5qhc01li29j-6{list-style-type:none}.lst-kix_kzjbfvn5qe2e-6>li{counter-increment:lst-ctn-kix_kzjbfvn5qe2e-6}ol.lst-kix_lj40l5vaxjd0-0{list-style-type:none}ul.lst-kix_d5qhc01li29j-5{list-style-type:none}ul.lst-kix_d5qhc01li29j-0{list-style-type:none}ul.lst-kix_d5qhc01li29j-2{list-style-type:none}ul.lst-kix_d5qhc01li29j-1{list-style-type:none}ol.lst-kix_2vcjkputpssp-4.start{counter-reset:lst-ctn-kix_2vcjkputpssp-4 0}.lst-kix_lj40l5vaxjd0-4>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-4}.lst-kix_lj40l5vaxjd0-1>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-1}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_lj40l5vaxjd0-7>li{counter-increment:lst-ctn-kix_lj40l5vaxjd0-7}ul.lst-kix_h2ylx74aeggx-5{list-style-type:none}ul.lst-kix_h2ylx74aeggx-6{list-style-type:none}ul.lst-kix_h2ylx74aeggx-7{list-style-type:none}ul.lst-kix_h2ylx74aeggx-8{list-style-type:none}.lst-kix_lj40l5vaxjd0-3>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-3,decimal) ". "}.lst-kix_lj40l5vaxjd0-2>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-2,lower-roman) ". "}.lst-kix_lj40l5vaxjd0-1>li:before{content:"" counter(lst-ctn-kix_lj40l5vaxjd0-1,lower-latin) ". "}ol.lst-kix_lj40l5vaxjd0-3.start{counter-reset:lst-ctn-kix_lj40l5vaxjd0-3 0}ol{margin:0;padding:0}table td,table th{padding:0}.c18{background-color:#ffffff;padding-top:0pt;border-bottom-width:0pt;padding-bottom:6.9pt;line-height:1.25;border-bottom-style:solid;orphans:2;widows:2;text-align:center}.c1{margin-left:108pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c2{margin-left:35.4pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c5{background-color:#ffffff;color:#1f2328;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c0{background-color:#ffffff;color:#1f2328;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c13{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center;height:11pt}.c9{background-color:#ffffff;color:#1f2328;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Courier New";font-style:normal}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c3{margin-left:35.4pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c8{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c12{background-color:#ffffff;font-size:12pt;font-family:"Courier New";color:#1f2328;font-weight:400}.c23{font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Courier New";font-style:normal}.c14{background-color:#ffffff;font-size:23pt;color:#1f2328;font-weight:700}.c20{background-color:#ffffff;font-size:12pt;color:#1f2328}.c22{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c4{background-color:#ffffff;font-size:12pt;color:#ff0000}.c16{margin-left:72pt;padding-left:0pt}.c10{padding:0;margin:0}.c11{margin-left:36pt;padding-left:0pt}.c15{margin-left:108pt;padding-left:0pt}.c19{margin-left:72pt}.c21{margin-left:36pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c22 doc-content"><div><p class="c8"><span>WAIS Marwa </span></p><p class="c8"><span class="c20">------------------------------------------------------------------------------</span></p></div><h1 class="c18" id="h.6w5y2yjzrvgh"><span class="c14">client SMTP</span></h1><p class="c7"><span class="c6"></span></p><p class="c13"><span class="c5"></span></p><ol class="c10 lst-kix_kzjbfvn5qe2e-0 start" start="1"><li class="c8 c11 li-bullet-0"><span class="c5">Explication : </span></li></ol><ol class="c10 lst-kix_kzjbfvn5qe2e-1 start" start="1"><li class="c8 c16 li-bullet-0"><span class="c5">D&eacute;finitions et constantes : Le code utilise des d&eacute;finitions et des constantes pour faciliter la lecture et la maintenance du code. Par exemple, MAX_BUFFER_SIZE est d&eacute;fini comme la taille maximale du tampon de donn&eacute;es, et DEFAULT_SMTP_PORT est d&eacute;fini comme le port SMTP par d&eacute;faut (25).</span></li><li class="c8 c16 li-bullet-0"><span class="c5">Fonctions auxiliaires : Le code d&eacute;finit plusieurs fonctions auxiliaires pour envoyer des commandes SMTP, recevoir des r&eacute;ponses du serveur et &eacute;tablir une connexion au serveur SMTP. Ces fonctions sont utilis&eacute;es pour interagir avec le serveur SMTP conform&eacute;ment au protocole.</span></li><li class="c8 c16 li-bullet-0"><span class="c5">Fonction principale - main : La fonction main est le point d&#39;entr&eacute;e du programme. Elle g&egrave;re les arguments de ligne de commande, ouvre le fichier de message, &eacute;tablit une connexion au serveur SMTP, envoie les commandes SMTP appropri&eacute;es pour envoyer l&#39;e-mail, puis ferme la connexion:</span></li></ol><ol class="c10 lst-kix_kzjbfvn5qe2e-2 start" start="1"><li class="c8 c15 li-bullet-0"><span class="c5">Les arguments de ligne de commande sont analys&eacute;s pour obtenir le nom de l&#39;exp&eacute;diteur, le sujet, le fichier de message, le serveur SMTP et le destinataire.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">Le contenu du fichier de message est lu et stock&eacute; dans une variable message.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">Une connexion est &eacute;tablie avec le serveur SMTP en utilisant la fonction socket, connect, et les informations du serveur.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">Les commandes SMTP appropri&eacute;es (HELO, MAIL FROM, RCPT TO, DATA, QUIT) sont envoy&eacute;es au serveur en utilisant la fonction sendCommand.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">Les r&eacute;ponses du serveur sont re&ccedil;ues et v&eacute;rifi&eacute;es pour chaque commande envoy&eacute;e en utilisant la fonction receiveResponse.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">Le contenu de l&#39;e-mail est envoy&eacute; en utilisant la commande DATA, suivie de l&#39;en-t&ecirc;te et du corps de l&#39;e-mail.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">Une fois l&#39;e-mail envoy&eacute; avec succ&egrave;s, une commande QUIT est envoy&eacute;e pour terminer la session SMTP.</span></li><li class="c8 c15 li-bullet-0"><span class="c5">La connexion au serveur est ferm&eacute;e avec la fonction close.</span></li></ol><p class="c1"><span class="c5"></span></p><ol class="c10 lst-kix_kzjbfvn5qe2e-1" start="4"><li class="c8 c16 li-bullet-0"><span class="c5">Compilation et ex&eacute;cution : Le code peut &ecirc;tre compil&eacute; en utilisant un compilateur C (tel que GCC) en utilisant un fichier Makefile. Le Makefile fournit des r&egrave;gles pour compiler le code source et g&eacute;n&eacute;rer un ex&eacute;cutable. L&#39;ex&eacute;cutable peut &ecirc;tre ex&eacute;cut&eacute; en fournissant les arguments de ligne de commande n&eacute;cessaires pour l&#39;exp&eacute;diteur, le sujet, le fichier de message, le serveur SMTP et le destinataire.</span></li></ol><p class="c7 c19"><span class="c5"></span></p><ol class="c10 lst-kix_kzjbfvn5qe2e-0" start="2"><li class="c8 c11 li-bullet-0"><span class="c20">R&eacute;alisation : </span></li></ol><p class="c7 c19"><span class="c5"></span></p><p class="c7 c19"><span class="c5"></span></p><p class="c8"><span class="c5">./email_sender &lt;exp&eacute;diteur&gt; &lt;sujet&gt; &lt;fichier_message&gt; &lt;serveur&gt; &lt;destinataire&gt; [port]</span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span class="c5">-Exemple de session SMTP avec erreur fatale anti-relaying:</span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span class="c9">./email_sender marwa.wais@he-arc.ch &quot;Hello&quot; message.txt smtp.alphanet.ch houssem.themlaoui@he-arc.ch 25</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 82.67px;"><img alt="" src="images/image1.png" style="width: 601.70px; height: 82.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span class="c5">-Exemple de session SMTP :</span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span class="c9">./email_sender marwa.wais@he-arc.ch &quot;Hello&quot; message.txt smtprel.he-arc.ch houssem.themlaoui@he-arc.ch 25</span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c9"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 225.33px;"><img alt="" src="images/image5.png" style="width: 601.70px; height: 225.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c9"></span></p><p class="c8"><span class="c9">or with file &ldquo;message.txt&rdquo; :</span></p><p class="c7"><span class="c9"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 216.00px;"><img alt="" src="images/image10.png" style="width: 601.70px; height: 216.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 527.00px; height: 486.50px;"><img alt="" src="images/image6.jpg" style="width: 527.00px; height: 486.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c9"></span></p><p class="c8"><span class="c12">-</span><span class="c20">Exemple session SMTP avec erreur temporaire greylisting</span></p><p class="c7"><span class="c9"></span></p><p class="c8"><span class="c9">./email_sender marwa.wais@he-arc.ch &quot;test&quot; message.txt smtp.alphanet.ch schaefer@alphanet.ch 25</span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c9"></span></p><p class="c8"><span class="c4">file + direct text :</span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c9"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 329.33px;"><img alt="" src="images/image8.png" style="width: 601.70px; height: 329.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c9"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 358.67px;"><img alt="" src="images/image9.png" style="width: 601.70px; height: 358.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 314.67px;"><img alt="" src="images/image4.png" style="width: 601.70px; height: 314.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c5"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 420.00px;"><img alt="" src="images/image3.png" style="width: 601.70px; height: 420.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><ol class="c10 lst-kix_kzjbfvn5qe2e-0" start="3"><li class="c8 c11 li-bullet-0"><span class="c5">Serveur SMTP Local: </span></li></ol><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c7"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c8 c21"><span class="c5">Create the first user:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">#useradd -m &nbsp;user1</span></p><p class="c3"><span class="c0">#passwd user1</span></p><p class="c3"><span class="c0">Create the second user:</span></p><p class="c3"><span class="c0">#useradd -m user2</span></p><p class="c3"><span class="c0">#passwd user2</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">apt-get -y install postfix</span></p><p class="c2"><span class="c0"></span></p><p class="c8 c21"><span class="c5">By default Port number 25, 110 and 143 are closed so we need to allow access throw those ports Configuring the Firewall:</span></p><p class="c8 c21"><span class="c5">Enabling access on port SMPT (tcp/25), POP3 (tcp/110), and IMAP (tcp/143) in the iptables.</span></p><p class="c3"><span class="c0">Edit the iptable configuration file:</span></p><p class="c3"><span class="c0">[root@dlp ~]# firewall-cmd --add-service=smtp &ndash;permanent</span></p><p class="c3"><span class="c0">[root@dlp ~]# firewall-cmd --add-service={pop3,imap} --permanent</span></p><p class="c3"><span class="c0">[root@dlp ~]# firewall-cmd &ndash;reload</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Open the postfix config file /etc/postfix/main.cf. Find the below lines and edit them as shown below.</span></p><p class="c3"><span class="c0">[root@mail ~]# nano /etc/postfix/main.cf</span></p><p class="c3"><span class="c0"># line 75 uncomment and enter your hostname</span></p><p class="c3"><span class="c0">myhostname = mail.waismarwa.com</span></p><p class="c3"><span class="c0">#line no 83 - uncomment and enter your domain name</span></p><p class="c3"><span class="c0">mydomain = waismarwa.com</span></p><p class="c3"><span class="c0">#line no 99 - uncomment</span></p><p class="c3"><span class="c0">myorigin = $mydomain</span></p><p class="c3"><span class="c0"># line 116 change to all</span></p><p class="c3"><span class="c0">inet_interfaces = all</span></p><p class="c3"><span class="c0">#line no 164 - add $domain at the end</span></p><p class="c3"><span class="c0">mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain</span></p><p class="c3"><span class="c0">#line no 264 - uncomment and add your network range</span></p><p class="c3"><span class="c0">mynetworks = 192.168.1.0/24, 127.0.0.0/8</span></p><p class="c3"><span class="c0">#line no 419 - uncomment</span></p><p class="c3"><span class="c0">home_mailbox = Maildir/</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">After finishing the configuration we should start the service and keep it on</span></p><p class="c3"><span class="c0">[root@mail ~]# systemctl restart postfix</span></p><p class="c3"><span class="c0">[root@mail ~]# systemctl enable postfix</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c5"></span></p><p class="c3"><span class="c5">Note: The dot after the test command is important.</span></p><p class="c2"><span class="c5"></span></p><p class="c3"><span class="c0">[root@mail ~]# telnet localhost smtp</span></p><p class="c3"><span class="c0">Trying ::1...</span></p><p class="c3"><span class="c0">Connected to localhost.</span></p><p class="c3"><span class="c0">Escape character is &#39;^]&#39;.</span></p><p class="c3"><span class="c0">220 server.ostechnix.com ESMTP Postfix</span></p><p class="c3"><span class="c0">ehlo localhost</span></p><p class="c3"><span class="c0">250-server.ostechnix.com</span></p><p class="c3"><span class="c0">250-PIPELINING</span></p><p class="c3"><span class="c0">250-SIZE 10240000</span></p><p class="c3"><span class="c0">250-VRFY</span></p><p class="c3"><span class="c0">250-ETRN</span></p><p class="c3"><span class="c0">250-ENHANCEDSTATUSCODES</span></p><p class="c3"><span class="c0">250-8BITMIME</span></p><p class="c3"><span class="c0">250 DSN</span></p><p class="c3"><span class="c0">MAIL FROM:&lt;user1@waismarwa.com&gt;</span></p><p class="c3"><span class="c0">250 2.1.0 Ok</span></p><p class="c3"><span class="c0">rcpt to:&lt;user1@waismarwa.com&gt;</span></p><p class="c3"><span class="c0">250 2.1.5 Ok</span></p><p class="c3"><span class="c0">data</span></p><p class="c3"><span class="c0">354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span></p><p class="c3"><span class="c0">test</span></p><p class="c3"><span class="c0">.</span></p><p class="c3"><span class="c0">250 2.0.0 Ok: queued as 117113FF18</span></p><p class="c3"><span class="c0">quit</span></p><p class="c3"><span class="c0">221 2.0.0 Bye</span></p><p class="c3"><span class="c0">Connection closed by foreign host.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 641.33px;"><img alt="" src="images/image12.png" style="width: 601.70px; height: 641.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Check Mail</span></p><p class="c3"><span class="c5">Navigate to the user mail directory and check for the new mail.</span></p><p class="c3"><span class="c0">[root@mail ~]# cd /home/user1/Maildir/new/</span></p><p class="c3"><span class="c0">[root@mail new]# ls</span></p><p class="c3"><span class="c0">1360236956.Vfd00I35afM181256.server.ostechnix.com</span></p><p class="c3"><span class="c0">[root@mail new]# cat 1360236956.Vfd00I35afM181256.waismarwa.com</span></p><p class="c3"><span class="c0">Return-Path: &lt;user1@waismarwa.com&gt;</span></p><p class="c3"><span class="c0">X-Original-To: user1</span></p><p class="c3"><span class="c0">Delivered-To: user1@waismarwa.com</span></p><p class="c3"><span class="c0">Received: from localhost (localhost [IPv6:::1])</span></p><p class="c3"><span class="c0">by waismarwa.com (Postfix) with ESMTP id 117113FF18</span></p><p class="c3"><span class="c0">for &lt;user1&gt;; Thu, 7 Feb 2013 17:05:32 +0530 (IST)</span></p><p class="c3"><span class="c0">Message-Id: &lt;20130207113547.117113FF18@server.ostechnix.com&gt;</span></p><p class="c3"><span class="c0">Date: Thu, 7 Feb 2013 17:05:32 +0530 (IST)</span></p><p class="c3"><span class="c0">From: user1@waismarwa.com</span></p><p class="c3"><span class="c0">To: undisclosed-recipients:;</span></p><p class="c3"><span class="c0">test</span></p><p class="c3"><span class="c0">Postfix working now.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 344.00px;"><img alt="" src="images/image2.png" style="width: 601.70px; height: 344.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Dovecot is used to allow users to access their email by either imap or pop protocols.</span></p><p class="c2"><span class="c5"></span></p><p class="c3"><span class="c0">wget -O - https://repo.dovecot.org/dovecot-ee.gpg | sudo apt-key add -</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">echo &quot;deb https://repo.dovecot.org/ce-2.3-latest/debian/ buster main&quot; | sudo tee /etc/apt/sources.list.d/dovecot.list</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">sudo apt update</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">sudo apt install dovecot-core dovecot-imapd dovecot-pop3d</span></p><p class="c2"><span class="c0"></span></p><p class="c7"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Open the dovecot config file /etc/dovecot/dovecot.conf. Find and uncomment the line as shown below.</span></p><p class="c2"><span class="c5"></span></p><p class="c3"><span class="c0">[root@mail ~]# nano /etc/dovecot/dovecot.conf</span></p><p class="c3"><span class="c0">#line 24 uncomment</span></p><p class="c3"><span class="c0">protocols = imap pop3 </span></p><p class="c3"><span class="c0">#line 30:uncomment and change(if not use IPv6 )</span></p><p class="c3"><span class="c0">listen = *</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Open the file /etc/dovecot/conf.d/10-mail.conf and uncomment the line as shown below.</span></p><p class="c3"><span class="c0">[root@mail ~]# nano /etc/dovecot/conf.d/10-mail.conf</span></p><p class="c3"><span class="c0">mail_location = maildir:~/Maildir ##line no 24 - uncomment</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Open the /etc/dovecot/conf.d/10-auth.conf and edit as shown below.</span></p><p class="c3"><span class="c0">[root@mail ~]# nano /etc/dovecot/conf.d/10-auth.conf</span></p><p class="c3"><span class="c0">disable_plaintext_auth = no ##line no 10 - uncomment and chang to no.</span></p><p class="c3"><span class="c0">auth_mechanisms = plain login ##line no 100 - add the text &quot;login&quot;</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Open the /etc/dovecot/conf.d/10-master.conf and edit as shown below.</span></p><p class="c3"><span class="c0"># line 96-98: uncomment and</span></p><p class="c3"><span class="c0">add like follows</span></p><p class="c3"><span class="c0">unix_listener /var/spool/postfix/private/auth {</span></p><p class="c3"><span class="c0">&nbsp; mode = 0666</span></p><p class="c3"><span class="c0">&nbsp; user = postfix</span></p><p class="c3"><span class="c0">&nbsp; group = postfix</span></p><p class="c3"><span class="c0">}</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Restart the dovecot service.</span></p><p class="c3"><span class="c0">[root@mail ~]# systemctl restart dovecot</span></p><p class="c3"><span class="c0">[root@mail ~]# systemctl enable dovecot</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">Test Dovecot using the command telnet</span></p><p class="c3"><span class="c5">The commands shown in bold should be entered by the user.</span></p><p class="c3"><span class="c0">[root@mail ~]# telnet localhost pop3</span></p><p class="c3"><span class="c0">Trying ::1...</span></p><p class="c3"><span class="c0">Connected to localhost.</span></p><p class="c3"><span class="c0">Escape character is &#39;^]&#39;.</span></p><p class="c3"><span class="c0">+OK Dovecot ready.</span></p><p class="c3"><span class="c0">user user1</span></p><p class="c3"><span class="c0">+OK</span></p><p class="c3"><span class="c0">pass root</span></p><p class="c3"><span class="c0">+OK Logged in.</span></p><p class="c3"><span class="c0">list</span></p><p class="c3"><span class="c0">+OK 1 messages:</span></p><p class="c3"><span class="c0">1 428</span></p><p class="c3"><span class="c0">.</span></p><p class="c3"><span class="c0">retr 1</span></p><p class="c3"><span class="c0">+OK 428 octets</span></p><p class="c3"><span class="c0">Return-Path: &lt;user1@ostechnix.com&gt;</span></p><p class="c3"><span class="c0">X-Original-To: user1</span></p><p class="c3"><span class="c0">Delivered-To: user1@ostechnix.com</span></p><p class="c3"><span class="c0">Received: from localhost (localhost [IPv6:::1])</span></p><p class="c3"><span class="c0">by waismarwa.com (Postfix) with ESMTP id 117113FF18</span></p><p class="c3"><span class="c0">for &lt;user1&gt;; Thu, 7 Feb 2013 17:05:32 +0530 (IST)</span></p><p class="c3"><span class="c0">Message-Id: &lt;20130207113547.117113FF18@waismarwa.com&gt;</span></p><p class="c3"><span class="c0">Date: Thu, 7 Feb 2013 17:05:32 +0530 (IST)</span></p><p class="c3"><span class="c0">From: user1@waismarwa.com</span></p><p class="c3"><span class="c0">To: undisclosed-recipients:;</span></p><p class="c3"><span class="c0">test</span></p><p class="c3"><span class="c0">.</span></p><p class="c3"><span class="c0">quit</span></p><p class="c3"><span class="c0">+OK Logging out.</span></p><p class="c3"><span class="c0">Connection closed by foreign host.</span></p><p class="c3"><span class="c0">[root@mail ~]#</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c5">-------test avec Mozilla Thunderbird-----------</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 416.00px;"><img alt="" src="images/image7.png" style="width: 601.70px; height: 416.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 733.33px;"><img alt="" src="images/image11.png" style="width: 601.70px; height: 733.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></body></html>